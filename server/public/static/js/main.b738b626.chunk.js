(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,a){e.exports=a(79)},69:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),s=a.n(l),c=a(5),i=a(1),o=a(2),m=a(4),u=a(3),p=a(19),d=a.n(p),h=d.a.create({baseURL:"https://chiic.herokuapp.com",withCredentials:!0});function f(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var g=function(e){return h.post("/api/auth/signup",e).then((function(e){return e.data})).catch(f)},b=function(e){return h.post("/api/auth/signin",e).then((function(e){return e.data})).catch(f)},E=function(){return h.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(f)},v=function(){return h.get("/api/auth/logout").then((function(e){return e.data})).catch(f)},N=function(e,t){return h.post(e,t,{})},y=function(e){return h.get(e)},j=function(e,t){return h.get(e+t)},C=function(e,t){return h.patch(e,t,{})},k=function(e){return h.get(e)},S=r.a.createContext(),x=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;E().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return r.a.createElement(S.Provider,{value:e},this.props.children)}}]),a}(n.Component),O=a(6),_=function(e){return function(t){return r.a.createElement(S.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}},w=_((function(e){var t=e.context;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement(c.c,{to:"/"},r.a.createElement("h1",{className:"title is-3 has-text-dark-grey logo"},"ch",r.a.createElement("i",{className:"fas fa-socks has-text-primary"}),"c")),r.a.createElement(c.c,{to:"/",role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-item"},t.isLoggedIn&&"designer"===t.user.role&&r.a.createElement("div",{className:"button is-primary btn-scale-hover"},r.a.createElement(c.b,{to:"/create/project"},"Create a project")))),r.a.createElement("div",{className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"}),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},t.isLoggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"button is-light has-text-dark-gray bold"},r.a.createElement(c.c,{to:"/profile"},t.user&&t.user.userName," |"," ",t.user&&t.user.paillettes," ",r.a.createElement("i",{className:"fas fa-fire "}))),r.a.createElement(c.c,{to:"/signin",className:"button is-danger is-light",onClick:function(){v().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))}},r.a.createElement("i",{className:"fas fa-power-off"}))),!t.isLoggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"button is-primary is-outlined"},r.a.createElement(c.c,{to:"/signin"},"Log in")),r.a.createElement("div",{className:"button is-primary"},r.a.createElement(c.c,{to:"/signup"},"Create account"))))))))})),F=a(13),I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){var a=t.target.name,n="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value;e.setState(Object(F.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault(),b(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/")})).catch((function(t){console.log(t),e.setState({message:t})}))},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title is-4"},"Sign in"),r.a.createElement("p",{className:"description"},"Welcome back!"),this.state.message&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"has-text-danger"},r.a.createElement("i",{class:"fas fa-exclamation-triangle"})," Invalid credentials")," ",r.a.createElement("br",null)),r.a.createElement("form",{onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"email",id:"email",name:"email",placeholder:"Email"}),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",id:"password",name:"password",placeholder:"Password"}),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("button",{className:"button is-block is-primary is-fullwidth"},"Submit"),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("span",null,"Not account yet? Signup")," ",r.a.createElement(c.b,{to:"/signup"},r.a.createElement("span",{className:"has-text-primary"},"now.")))))}}]),a}(n.Component);I.contextType=S;var P=Object(O.g)(I),M=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",userName:"",role:"user"},e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:"radio"===t.target.type?t.target.id:t.target.value,n=t.target.name;e.setState(Object(F.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),g(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/")})).catch((function(t){e.setState({message:t})}))},e}return Object(o.a)(a,[{key:"render",value:function(){return console.log(this.state.message),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title is-4"},"Create an account"),r.a.createElement("p",{className:"description"},"We need a few informations about you. Who are you?"),r.a.createElement("form",{onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"designer"===this.state.role?"is-primary tag is-large radio role-radio":"tag is-large radio role-radio"},r.a.createElement("input",{onChange:this.handleChange,type:"radio",name:"role",id:"designer",checked:"designer"===this.state.role}),"Designer"),r.a.createElement("label",{className:"user"===this.state.role?"is-primary tag is-large radio role-radio":"tag is-large radio role-radio"},r.a.createElement("input",{onChange:this.handleChange,id:"user",type:"radio",name:"role",checked:"user"===this.state.role}),"User")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"text",id:"username",name:"userName",placeholder:"Username",required:!0}),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-user"})))),this.state.message&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"has-text-danger"},r.a.createElement("i",{class:"fas fa-exclamation-triangle"})," This email already exists")," ",r.a.createElement("br",null)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"email",id:"email",name:"email",placeholder:"Email",required:!0}),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",id:"password",name:"password",placeholder:"Password",required:!0}),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("button",{className:"button is-block is-primary is-fullwidth"},"Submit"),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("span",null,"Already have an account? Signin")," ",r.a.createElement(c.b,{to:"/signin"},r.a.createElement("span",{className:"has-text-primary"},"here.")))))}}]),a}(n.Component);M.contextType=S;var L=Object(O.g)(M),A=(a(69),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"fullscreen-container"},r.a.createElement("div",{className:"blocks-container"},r.a.createElement("div",{className:"left block-home"},r.a.createElement("h1",{className:"title is-1"},"A second life for your clothes!"),r.a.createElement("h2",{className:"subtitle colored is-4"},"Give materials, help creators, get rewards."),r.a.createElement("p",null,"Tired of your old clothes getting dust in your closet? ",r.a.createElement("br",null),"Why not get rid of them and help your local disigners?! ",r.a.createElement("br",null),"Join the CHIIC project and make the world a slightly more fair, stylich and ecofriendly place!")),r.a.createElement("div",{className:"right block-home"},r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/signup",component:L}),r.a.createElement(O.b,{exact:!0,path:"/home",component:L}),r.a.createElement(O.b,{exact:!0,path:"/signin",component:P}))))))}}]),a}(r.a.Component)),D=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isChecked:!1},e.toggleChange=function(){e.setState({isChecked:!e.state.isChecked}),e.props.onChange(e.props.label)},e.toggleColor=function(e){e.target.parentNode.classList.toggle("is-primary")},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("label",{className:"checkbox tag"},r.a.createElement("input",{type:"checkbox",checked:this.state.isChecked,onChange:this.toggleChange,onClick:this.toggleColor}),this.props.label)}}]),a}(n.Component),q=a(18),U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={search:"",results:[],isLoading:!1},n.handleSearchChange=n.handleSearchChange.bind(Object(q.a)(n)),n}return Object(o.a)(a,[{key:"handleSearchChange",value:function(e){var t=this;this.setState({search:e.target.value,isLoading:!0}),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){t.performSearch()}),1e3)}},{key:"performSearch",value:function(){var e=this;""!==this.state.search?d.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.search,".json?access_token=").concat("pk.eyJ1IjoiZnJhbmNvaXMtdmlldXgiLCJhIjoiY2tnYWw5Z2pzMDRvYzJxcWFiYmdxY2U2ZiJ9.sWshwh1ODbfX4rnzT-9YUw")).then((function(t){e.setState({results:t.data.features,isLoading:!1})})):this.setState({results:[],isLoading:!1})}},{key:"handleItemClicked",value:function(e){this.setState({search:e.place_name,results:[]}),this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"LocationAutoComplete"},r.a.createElement("div",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input is-rounded searchbar",type:"text",value:this.state.search,onChange:this.handleSearchChange,placeholder:"Enter an address to find a store"}),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-search"}))),r.a.createElement("ul",{className:"location-autocomplete-results"},this.state.results.map((function(t){return r.a.createElement("li",{key:t.id,className:"location-autocomplete-items has-text-grey",onClick:function(){return e.handleItemClicked(t)}},r.a.createElement("p",null,t.place_name))})),this.state.isLoading&&r.a.createElement("li",{className:"location-autocomplete-items has-text-grey"},"Loading...")))}}]),a}(n.Component),T=["cotton","linen","silk","wool","artificial fibers"],Y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={fabric_types:[]},e.componentDidUpdate=function(t,a){a!==e.state&&e.filterByFabric()},e.filterByFabric=function(){0!==e.state.fabric_types.length||e.props.isStoreSelected?e.props.filterByFabricType(e.state.fabric_types):e.props.displayAllProjects()},e.handleCheckChanges=function(t){var a=String(t),n=e.state.fabric_types;if(0!==n.length&&n.includes(a))for(var r=0;r<n.length;r++)n[r]===a&&n.splice(r,1);else n.push(a);e.setState({fabric_types:n})},e.handlePlace=function(t){e.props.sendCoordinates(t.geometry.coordinates)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"left-block-top"},r.a.createElement(U,{onSelect:this.handlePlace}),r.a.createElement("div",{className:"checkbox-container"},r.a.createElement("span",null,"Filter by materials:"),T.map((function(t){return r.a.createElement(D,{key:t,label:t,value:t,onChange:e.handleCheckChanges})}))),r.a.createElement("div",{className:"projects-found"},r.a.createElement("h3",{className:"bold has-text-grey"},this.props.projectsNumber," project(s) found:"),this.props.isStoreSelected&&r.a.createElement("div",null,r.a.createElement("button",{className:"button is-primary is-small is-light",onClick:this.props.handleResetClick},"show all"))))}}]),a}(n.Component),B=a(40),W=a.n(B),J=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={store_address:"Loading...",store_name:"Loading...",creator_pic:"Loading..."},e.componentDidMount=function(){e.getStoreInfo(),e.getUserInfo()},e.getUserInfo=function(){var t;t=e.props.creator._id?e.props.creator._id:e.props.creator,j("/api/users/",t).then((function(t){e.setState({creator_pic:t.data.profilePicture})})).catch((function(e){return console.log(e)}))},e.getStoreInfo=function(){j("/api/stores/",e.props.store_id).then((function(t){e.setState({store_address:t.data.location.formattedAddress,store_name:t.data.name})})).catch((function(e){return console.log(e)}))},e.getItemsCollected=function(){var t=0;return e.props.materials.map((function(e){return t+=e.collected_quantity})),t},e.getTotalItemsRequired=function(){var t=0;return e.props.materials.map((function(e){return t+=e.required_quantity})),t},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"item-card",onClick:function(){return e.props.displayProject(e.props.id)}},r.a.createElement(c.b,{to:"/project/".concat(this.props.id)},r.a.createElement("div",{className:"card-content-container"},r.a.createElement("div",{className:"left-container"},r.a.createElement("div",{className:"card-img image is-96x96"},r.a.createElement("img",{className:"is-rounded",src:this.state.creator_pic,alt:"creator-pic"})),r.a.createElement("div",{className:"card-infos"},r.a.createElement("p",{className:"has-text-grey"},this.props.creator.userName),r.a.createElement("h3",{className:"has-text-grey-dark bold"},this.props.name),r.a.createElement("div",{className:"location-container has-text-grey"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-store-alt has-text-grey"})," ",this.state.store_name),r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-map-marker-alt has-text-grey"})," ",this.state.store_address)),r.a.createElement("div",{className:"card-tags"},this.props.materials.map((function(e){return r.a.createElement("div",{key:e.fabric_type,className:"a-tag tag is-info is-light"},e.fabric_type)}))))),r.a.createElement("div",{className:"card-state"},r.a.createElement("p",{className:"tag is-warning is-light"},this.getItemsCollected(),"/",this.getTotalItemsRequired()," items collected"),r.a.createElement("span",{className:"has-text-grey"},r.a.createElement(W.a,{format:"MMM D, YYYY"},this.props.deadline))))))}}]),a}(r.a.Component),R=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-list"},e.projects.map((function(t){return r.a.createElement(r.a.Fragment,{key:t._id},r.a.createElement(J,{key:t._id,id:t._id,name:t.name,description:t.description,creator:t.creator,materials:t.materials,deadline:t.deadline,store_id:t.store,displayProject:e.currentProject}))}))))}}]),a}(r.a.Component),z=a(20),V=Object(z.b)({accessToken:"pk.eyJ1IjoiZnJhbmNvaXMtdmlldXgiLCJhIjoiY2tnYWw5Z2pzMDRvYzJxcWFiYmdxY2U2ZiJ9.sWshwh1ODbfX4rnzT-9YUw"}),X=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={stores:null,location:[2.3514,48.85658]},e.componentDidMount=function(){y("/api/stores").then((function(t){return e.setState({stores:t.data})})).catch((function(e){return console.log(e)}))},e.handleClickMarker=function(t){e.props.handleMarkClic(t),console.log("hello")},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state.stores,a={width:"4vw",borderRadius:"50%",borderColor:"white",cursor:"pointer"};return r.a.createElement("div",null,this.props.searchInput&&r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{style:"mapbox://styles/mapbox/light-v10",center:this.props.searchInput,zoom:[12],containerStyle:{height:"96vh",width:"100vw",borderRadius:"20px"}},t?t.map((function(t){return r.a.createElement(z.a,{key:t._id,coordinates:t.location.coordinates,anchor:"bottom",onClick:function(){return e.handleClickMarker(t._id)}},r.a.createElement("img",{alt:t.name,style:a,src:t.image}))})):null)))}}]),a}(n.Component),Z=function(){return r.a.createElement("div",{className:"left-block-top"},r.a.createElement("div",{className:"profile-list-title"},r.a.createElement("h2",{className:"tag is-medium is-primary is-light"},"Your contributions")))},G=(a(74),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).getValue=function(){var t=0,a=0;return e.props.materials.map((function(e){return t+=e.required_quantity,a+=e.collected_quantity})),(a/t*100).toFixed()},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"progressbar-container"},this.props.materials&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"This project is"," ",r.a.createElement("span",{className:"bold has-text-dark-gray is-medium"},this.getValue(),"%")," ","completed"),r.a.createElement("progress",{className:"progress is-primary",value:this.getValue(),max:"100"})))}}]),a}(r.a.Component)),H=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).displayContributors=function(){return 0===e.props.contributors.length?r.a.createElement("div",null,r.a.createElement("p",null,"No contributor yet, be the first!")):e.props.contributors.map((function(e){return r.a.createElement("div",{key:e._id,className:"contributor-item"},r.a.createElement("figure",{className:"image is-96x96"},r.a.createElement("img",{className:"is-rounded",src:e.id_user.profilePicture,alt:"contributor"})),r.a.createElement("span",null,e.id_user.userName))}))},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"has-text-dark-gray bold"},"Contributors:"),r.a.createElement("div",{className:"contributors-container"},this.props.contributors&&this.displayContributors()))}}]),a}(r.a.Component),K=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={fabric_type:e.props.project.materials[0].fabric_type,quantity:""},e.handleSubmit=function(t){t.preventDefault(),e.props.handleContributionForm(e.state),e.props.goBack()},e.handleChange=function(t){e.setState(Object(F.a)({},t.target.name,t.target.value))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bottom-form-container"},r.a.createElement("div",null,r.a.createElement("img",{className:"illu-gift",src:"/gift-woman.svg",alt:"illu-gift"})),r.a.createElement("div",{className:"form-container"},r.a.createElement("h3",{className:"has-text-dark-gray bold"},"What do you want to give?"),r.a.createElement("form",{className:"field ",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{name:"fabric_type",onChange:this.handleChange},this.props.project.materials&&this.props.project.materials.map((function(e){return r.a.createElement("option",{key:e.fabric_type},e.fabric_type)}))))),r.a.createElement("p",{className:"control"},r.a.createElement("input",{className:"input",name:"quantity",type:"number",placeholder:"Amount",onChange:this.handleChange}))),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary"},"Submit")),r.a.createElement("p",{className:"control"},r.a.createElement("span",{onClick:function(){return e.props.goBack()},className:"button is-light"},"Cancel")))))))}}]),a}(r.a.Component),Q=a(23),$=a.n(Q),ee=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).changeDate=function(t){return $()(t).format(e.props.format)},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.changeDate(this.props.date))}}]),a}(n.Component),te=a(16),ae=(a(38),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"circle-progress-item"},r.a.createElement(te.a,{maxValue:e.material.required_quantity,value:e.material.collected_quantity,text:"".concat(e.material.collected_quantity,"/").concat(e.material.required_quantity),styles:Object(te.b)({textColor:"#00D1B2",pathColor:"#00D1B2"})}),r.a.createElement("p",{className:"tag legend-circle-progress"},e.material.fabric_type)))}),ne=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isContributing:!1,currentProject:""},e.componentDidMount=function(){0===e.props.project.length&&e.getSelectedProject(e.props.match.params.id)},e.getSelectedProject=function(t){j("/api/projects/",t).then((function(t){e.setState({currentProject:t.data})})).catch((function(e){return console.log(e)}))},e.displayContributionForm=function(){e.setState((function(e){return{isContributing:!e.isContributing}}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e;return e=0===this.props.project.length?this.state.currentProject:this.props.project,r.a.createElement("div",{className:"project-grid-container"},r.a.createElement("div",{className:"project-info"},r.a.createElement("div",{className:"project-infos-header"},r.a.createElement(c.b,{to:"/"},r.a.createElement("span",{className:"delete close-btn is-medium"})),r.a.createElement("h1",{className:"bold has-text-dark-gray"},e.name),r.a.createElement("p",null,"launched by"," ",e.creator&&r.a.createElement("span",{className:"tag is-info is-light"},e.creator.userName)," ","| deadline:"," ",e.deadline&&r.a.createElement("span",{className:"tag is-warning is-light"},r.a.createElement(ee,{format:"MMMM D, YYYY",date:e.deadline}))),r.a.createElement("div",{className:"project-description"},r.a.createElement("i",{className:"fas fa-quote-left has-text-grey-lighter fa-lg"}),r.a.createElement("p",null,r.a.createElement("i",null,e.description)),r.a.createElement("i",{className:"fas fa-quote-right has-text-grey-lighter fa-lg"})),r.a.createElement("div",{className:"project-location"},r.a.createElement("h3",{className:"has-text-dark-gray bold"},"Drop your items here:"),this.props.store.location&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-store-alt has-text-primary"})," ",this.props.store.name),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-map-marker-alt has-text-primary"})," ",this.props.store.location.formattedAddress))),r.a.createElement(G,{isSuccess:e.isSuccess,materials:e.materials})),!this.state.isContributing&&!1===e.isSuccess&&r.a.createElement("button",{onClick:this.displayContributionForm,className:"button is-primary contribute-btn btn-scale-hover"},"contribute"),e.isSuccess&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,r.a.createElement("span",{role:"img","aria-label":"congratulation"},"\ud83d\ude4c")," ","We did it!"," ",r.a.createElement("span",{role:"img","aria-label":"congratulation"},"\ud83d\udcaa"),"Thank you!!!"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"bottom-container"},this.state.isContributing?r.a.createElement(K,{project:e,goBack:this.displayContributionForm,handleContributionForm:this.props.handleContributionFormSubmit}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"has-text-dark-gray bold"},"Required materials:"),r.a.createElement("div",{className:"circle-gauges-container"},e.materials&&e.materials.map((function(e){return r.a.createElement(ae,{key:e._id,material:e})}))),r.a.createElement("hr",null),r.a.createElement(H,{contributors:e.contributors}))))}}]),a}(r.a.Component),re=(a(75),_(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userName:e.props.userName,email:e.props.email,address:e.props.address},e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value,n=t.target.name;e.setState(Object(F.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),e.props.updateProfile(e.state)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label"},"Profile picture"),r.a.createElement("div",{className:"file is-small"},r.a.createElement("label",{className:"file-label"},r.a.createElement("input",{className:"file-input",type:"file",name:"profilePicture",onChange:this.handleChange}),r.a.createElement("span",{className:"file-cta"},r.a.createElement("span",{className:"file-icon"},r.a.createElement("i",{className:"fas fa-upload"})),r.a.createElement("span",{className:"file-label"},"Choose a file\u2026")))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Username"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"userName",placeholder:"e.g Alex Smith",onChange:this.handleChange,value:this.state.userName}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"email",name:"email",value:this.state.email,placeholder:"e.g. alexsmith@gmail.com",onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Address"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"address",placeholder:"e.g. 40 boulevard Voltaire, Paris",onChange:this.handleChange,value:this.state.address}))),r.a.createElement("div",{className:"field is-grouped is-grouped-right"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary"},"Save")),r.a.createElement("p",{className:"control"},r.a.createElement("span",{onClick:function(){return e.props.cancelEdit()},className:"button is-light"},"Cancel"))))}}]),a}(n.Component))),le=_((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bottom-block-paillettes"},r.a.createElement("div",{className:"counter"},r.a.createElement(te.a,{maxValue:80,value:e.context.user.paillettes,text:"".concat(Math.round(e.context.user.paillettes/80*100),"%"),styles:Object(te.b)({textColor:"#00D1B2",pathColor:"#00D1B2"})})),r.a.createElement("div",{className:"paillettes-infos"},r.a.createElement("h3",{className:"bold has-text-dark-gray"},"You collected"," ",r.a.createElement("span",{className:"tag is-primary is-light"},e.context.user.paillettes," paillette(s)")),r.a.createElement("p",null,"Only ",80-e.context.user.paillettes," paillette(s) left until next reward!"),r.a.createElement("span",{className:"paillettes-rules"},r.a.createElement("i",{className:"fas fa-info-circle has-text-primary"})," 1 item contributed = 1 paillette"))))})),se=_(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={edit_profile:!1},e.updateUserProfile=function(t){var a=new FormData;for(var n in t)a.append(n,t[n]);C("/api/users/".concat(e.props.context.user._id),a).then((function(t){e.props.context.setUser(t.data),e.toggleEditState()})).catch((function(e){return console.log(e)}))},e.toggleEditState=function(){e.setState((function(e){return{edit_profile:!e.edit_profile}}))},e.renderBottomComponent=function(){return e.state.edit_profile?r.a.createElement(re,{userName:e.props.context.user.userName,email:e.props.context.user.email,address:e.props.context.user.address,profilePicture:e.props.context.user.profilePicture,updateProfile:e.updateUserProfile,cancelEdit:e.toggleEditState}):r.a.createElement(le,null)},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"profile-grid-container"},r.a.createElement(c.b,{to:"/"},r.a.createElement("span",{className:"delete is-medium"})),r.a.createElement("div",{className:"top-block"},r.a.createElement("figure",{className:"image is-128x128"},r.a.createElement("img",{className:"is-rounded",src:this.props.context.user.profilePicture,alt:"".concat(this.props.context.user.userName,"-profile-pic")})),r.a.createElement("h1",{className:"has-text-dark-gray bold"},this.props.context.user.userName),r.a.createElement("h3",null,this.props.context.user.email),r.a.createElement("h3",null,this.props.context.user.address),!this.state.edit_profile&&r.a.createElement("button",{onClick:this.toggleEditState,className:"button is-primary is-outlined edit-profile-btn"},r.a.createElement("span",null,"edit ",r.a.createElement("i",{className:"fas fa-user-edit"})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"bottom-block"},this.renderBottomComponent()))}}]),a}(r.a.Component)),ce=_((function(e){return r.a.createElement("div",{className:"item-card"},r.a.createElement("div",{className:"card-content-container"},r.a.createElement("div",{className:"left-container"},r.a.createElement("div",{className:"card-img-contribution"},r.a.createElement("i",{className:"fas fa-4x has-text-white-ter fa-hand-holding-heart"})),r.a.createElement("div",{className:"card-infos"},r.a.createElement("p",{className:"has-text-grey"},e.project.creator.userName),r.a.createElement("h3",{className:"has-text-grey-dark bold"},e.project.name),r.a.createElement("p",null,"You contributed with:"),r.a.createElement("div",{className:"card-tags"},e.project.contributors.map((function(t){return t.id_user._id===e.context.user._id?t.contributed_materials.map((function(e){return r.a.createElement("div",{key:e._id,className:"a-tag tag is-info is-light"},e.quantity," piece(s) of ",e.fabric_type)})):null}))))),r.a.createElement("div",{className:"card-state"},r.a.createElement("p",{className:"tag is-warning is-light"},"n\xb0",Math.floor(2e3*Math.random())))))})),ie=function(e){return r.a.createElement("div",{className:"card-list"},e.projects.map((function(e){return r.a.createElement(ce,{key:e._id,project:e})})))},oe=_(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={projects:[],allProjects:[],selectedProject:[],selectedProjectStoreInfo:[],userContributions:[],store_selected:!1,currentStoreId:null,selectedStoreId:null,inputCoordinates:[2.3968998,48.8651136],fabricFilters:[]},e.resetState=function(){y("/api/projects").then((function(t){e.setState({projects:t.data,allProjects:t.data,store_selected:!1,currentStoreId:null}),e.state.fabricFilters.length>0&&e.filterByFabricTypes(e.state.fabricFilters)})).catch((function(e){return console.log(e)}))},e.getSelectedProject=function(t){j("/api/projects/",t).then((function(t){e.setState({selectedProject:t.data}),e.getSelectedProjectStore()})).catch((function(e){return console.log(e)}))},e.getSelectedProjectStore=function(){j("/api/stores/",e.state.selectedProject.store).then((function(t){e.setState({selectedProjectStoreInfo:t.data})})).catch((function(e){return console.log(e)}))},e.getUsersContributions=function(){k("/api/projects/user").then((function(t){e.setState({userContributions:t.data})})).catch((function(e){return console.log(e)}))},e.handleMarkerClick=function(t){k("/api/projects/stores/"+t).then((function(a){e.setState({projects:a.data,store_selected:!0,currentStoreId:t}),e.state.fabricFilters.length>0&&e.filterByFabricTypes(e.state.fabricFilters)})).catch((function(e){return console.log(e)}))},e.filterByFabricTypes=function(t){var a=[];a=e.state.store_selected?e.state.projects:e.state.allProjects;var n=[];e.setState({fabricFilters:t}),t.forEach((function(e){a.map((function(t){return t.materials.map((function(a){return a.fabric_type!==e||n.some((function(e){return e._id===t._id}))?null:n.push(t)}))}))})),e.setState({projects:n})},e.filterByFabricTypesWhenMarkerClicked=function(t){e.filterByFabricTypes(t),e.state.projects.length<=1&&e.state.store_selected&&e.handleMarkerClick(e.state.currentStoreId)},e.displayProjectList=function(){return e.props.history.location.pathname.toString().startsWith("/profile")?r.a.createElement(ie,{projects:e.state.userContributions}):r.a.createElement(R,{projects:e.state.projects,currentProject:e.getSelectedProject})},e.getInputCoordinates=function(t){e.setState({inputCoordinates:t})},e.handleContributionSubmit=function(t){var a;a=0===e.state.selectedProject.length?e.props.match.params.id:e.state.selectedProject._id,C("/api/projects/".concat(a,"/contributions"),t).then((function(t){e.setState({selectedProject:t.data})})).catch((function(e){return console.log()})),C("/api/users/paillettes",t).then((function(t){e.props.context.setUser(t.data)})).catch((function(e){return console.log()}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.resetState(),this.props.context.user&&this.getUsersContributions()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"dashboard-container"},r.a.createElement("div",{className:"left-block",style:"/"===this.props.history.location.pathname?{boxShadow:"25px 47px 100px -49px rgba(0, 0, 0, 0.4)"}:null},r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(Y,Object.assign({},t,{filterByFabricType:e.filterByFabricTypesWhenMarkerClicked,displayAllProjects:e.resetState,isStoreSelected:e.state.store_selected,sendCoordinates:e.getInputCoordinates,projectsNumber:e.state.projects.length,handleResetClick:e.resetState}))}}),r.a.createElement(O.b,{path:"/project/:id",render:function(t){return r.a.createElement(Y,Object.assign({},t,{filterByFabricType:e.filterByFabricTypesWhenMarkerClicked,displayAllProjects:e.resetState,isStoreSelected:e.state.store_selected,projectsNumber:e.state.projects.length,handleResetClick:e.resetState}))}}),r.a.createElement(O.b,{path:"/profile",component:Z})),this.displayProjectList()),r.a.createElement("div",{className:"right-block"},r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(X,Object.assign({},t,{handleMarkClic:e.handleMarkerClick,searchInput:e.state.inputCoordinates}))}}),r.a.createElement(O.b,{path:"/project/:id",render:function(t){return r.a.createElement(ne,Object.assign({},t,{project:e.state.selectedProject,handleContributionFormSubmit:e.handleContributionSubmit,store:e.state.selectedProjectStoreInfo}))}}),r.a.createElement(O.b,{path:"/profile",render:function(e){return r.a.createElement(se,e)}}))))}}]),a}(r.a.Component)),me=a(41),ue=_((function(e){var t=e.component,a=e.context,n=Object(me.a)(e,["component","context"]);return a.isLoading?null:a.isLoggedIn?r.a.createElement(O.b,Object.assign({},n,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(O.a,{to:"/signin"})})),pe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={availableStores:[],availableFabric:["cotton","linen","silk","wool","artificial fibers"]},e.componentDidMount=function(){e.getAllStores()},e.getAllStores=function(){y("/api/stores").then((function(t){return e.setState({availableStores:t.data})})).catch((function(e){return console.log(e)}))},e.handleChangeObj=function(t,a){e.props.handleChangeMaterials({fabric_type:t.target.name,required_quantity:t.target.value})},e.handleSubmit=function(t){e.props.handleFormSubmit()},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-project-container"},r.a.createElement("h1",{className:"bold title is-3"},"New project"),r.a.createElement("form",{className:"project-form field ",onSubmit:this.props.handleFormSubmit},r.a.createElement("div",{className:"top-project-form"},r.a.createElement("div",{className:"input-name"},r.a.createElement("label",{className:"label"},"Name *"),r.a.createElement("p",{className:"control"},r.a.createElement("input",{className:"input",name:"name",type:"string",placeholder:"Name ",onChange:this.props.handleChange,required:!0}))),r.a.createElement("div",{className:"select-store"},r.a.createElement("label",{className:"label"},"Store * "),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{name:"store",onChange:this.props.handleChange,required:!0},this.state.availableStores&&this.state.availableStores.map((function(e){return r.a.createElement("option",{key:e.name,value:e._id},e.name)}))))))),r.a.createElement("div",{className:"input-deadline"},r.a.createElement("label",{className:"label"},"Deadline *"),r.a.createElement("p",{className:"control"},r.a.createElement("input",{className:"input",name:"deadline",type:"date",onChange:this.props.handleChange,required:!0})))),r.a.createElement("div",null,r.a.createElement("label",{className:"label"},"Description *"),r.a.createElement("p",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"description",type:"text",placeholder:"Describe your project in a few words...",onChange:this.props.handleChange,required:!0}))),r.a.createElement("div",{className:"materials-block"},r.a.createElement("label",{className:"label"},"Materials needed * "),r.a.createElement("div",{className:"materials-container"},this.state.availableFabric&&this.state.availableFabric.map((function(t){return r.a.createElement("div",{className:"field material-item",key:t,name:t},r.a.createElement("label",{className:"label is-small has-text-grey"},t),r.a.createElement("input",{className:"input",name:t,type:"number",placeholder:"1",min:0,onChange:e.handleChangeObj}))})))),r.a.createElement("div",{className:"input-image"},r.a.createElement("label",{className:"label"},"Image"),r.a.createElement("div",{class:"file has-name"},r.a.createElement("label",{class:"file-label"},r.a.createElement("input",{className:"file-input",type:"file",name:"image",onChange:this.props.handleChange}),r.a.createElement("span",{class:"file-cta"},r.a.createElement("span",{class:"file-icon"},r.a.createElement("i",{class:"fas fa-upload"})),r.a.createElement("span",{class:"file-label"},"Choose a file\u2026")),this.props.projectImage&&r.a.createElement("span",{class:"file-name"},this.props.projectImage)))),r.a.createElement("div",{className:"field is-grouped is-grouped-right"},r.a.createElement("div",{className:"control"},r.a.createElement(c.b,{to:"/"},r.a.createElement("div",{className:"button is-light"},"Cancel"))),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary"},"Create")))))}}]),a}(n.Component),de=[],he=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={creator:"",image:"/path/your-image",name:"",description:"",deadline:"",contributors:[],materials:[],store:""},e.componentDidMount=function(){e.props.context.user&&e.setState({creator:e.props.context.user._id}),y("/api/stores").then((function(t){return e.setState({store:t.data[0]._id})})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){e.setState(Object(F.a)({},t.target.name,t.target.value))},e.handleChangeMaterials=function(t){if(0!==de.length&&de.some((function(e){return e.fabric_type===t.fabric_type})))for(var a=0;a<de.length;a++)de[a].fabric_type===t.fabric_type&&(de.splice(a,1),de.push(t));else de.push(t);e.setState({materials:de})},e.handleSubmit=function(t){t.preventDefault(),N("/api/projects",e.state).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),e.props.history.push("/")},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(pe,{handleChange:this.handleChange,handleChangeMaterials:this.handleChangeMaterials,handleFormSubmit:this.handleSubmit,projectImage:this.state.image})}}]),a}(n.Component),fe=Object(O.g)(_(he));a(76);var ge=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(w,null),r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/home",component:A}),r.a.createElement(O.b,{exact:!0,path:"/signin",component:A}),r.a.createElement(O.b,{exact:!0,path:"/signup",component:A}),r.a.createElement(ue,{exact:!0,path:"/create/project",component:fe}),r.a.createElement(ue,{exact:!0,path:"/",component:oe}),r.a.createElement(ue,{exact:!0,path:"/project/:id",component:oe}),r.a.createElement(ue,{exact:!0,path:"/profile",component:oe})))};a(77),a(78);s.a.render(r.a.createElement(c.a,null,r.a.createElement(x,null,r.a.createElement(ge,null))),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.b738b626.chunk.js.map