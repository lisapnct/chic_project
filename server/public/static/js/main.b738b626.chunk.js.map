{"version":3,"sources":["api/apiHandler.js","components/Auth/UserContext.jsx","components/Auth/UserProvider.jsx","components/Auth/withUser.jsx","components/NavMain.jsx","components/Forms/FormSignin.jsx","components/Forms/FormSignup.jsx","pages/Home.jsx","components/Tools/Checkbox.jsx","components/Tools/LocationAutocomplete.jsx","components/Searchbar.jsx","components/Project/ProjectCard.jsx","components/Project/ProjectList.jsx","components/HomeMap.jsx","components/Profile/ListTitle.jsx","components/Project/Progress.jsx","components/Project/Contributors.jsx","components/Forms/FormContribution.jsx","components/Tools/DateFormat.jsx","components/Tools/CircleProgressBar.jsx","components/Project/ProjectContainer.jsx","components/Forms/FormUser.jsx","components/Profile/PointsCounter.jsx","components/Profile/ProfileContainer.jsx","components/Profile/ContributionCard.jsx","components/Profile/ContributionList.jsx","pages/Dashboard.jsx","components/ProtectedRoute.jsx","components/Forms/FormProject.jsx","pages/CreateProject.jsx","App.jsx","index.js"],"names":["service","axios","create","baseURL","process","withCredentials","errorHandler","error","response","data","console","log","userInfo","post","then","res","catch","get","endPoint","id","patch","UserContext","React","createContext","UserProvider","state","user","isLoggedIn","isLoading","setUser","setState","removeUser","apiHandler","authValues","this","Provider","value","props","children","Component","withUser","ComponentToPassUserContextTo","Consumer","context","className","to","role","aria-label","aria-expanded","aria-hidden","Fragment","userName","paillettes","onClick","FormSignin","email","password","handleChange","event","key","target","name","type","files","checked","handleSubmit","preventDefault","history","push","message","class","onChange","onSubmit","placeholder","contextType","withRouter","FormSignup","required","Home","exact","path","component","Checkbox","isChecked","toggleChange","label","toggleColor","parentNode","classList","toggle","LocationAutoComplete","search","results","handleSearchChange","bind","e","clearTimeout","timeoutId","setTimeout","performSearch","features","place","place_name","onSelect","map","handleItemClicked","fabric_types","Searchbar","componentDidUpdate","prevProps","prevState","filterByFabric","length","isStoreSelected","filterByFabricType","displayAllProjects","handleCheckChanges","labelStr","String","fabricArr","includes","i","splice","handlePlace","sendCoordinates","geometry","coordinates","elm","projectsNumber","handleResetClick","ProjectCard","store_address","store_name","creator_pic","componentDidMount","getStoreInfo","getUserInfo","query","creator","_id","apiRes","profilePicture","err","store_id","location","formattedAddress","getItemsCollected","qt","materials","material","collected_quantity","getTotalItemsRequired","max","required_quantity","displayProject","src","alt","fabric_type","format","deadline","ProjectList","projects","project","description","store","currentProject","Map","ReactMapboxGl","accessToken","HomeMap","stores","apiErr","handleClickMarker","handleMarkClic","mapElmStyle","width","borderRadius","borderColor","cursor","searchInput","style","center","zoom","containerStyle","height","anchor","image","ListTitle","Progress","getValue","toFixed","Contributors","displayContributors","contributors","contributor","id_user","FormContribution","quantity","evt","handleContributionForm","goBack","DateFormat","changeDate","date","dayjs","CircleProgressBar","maxValue","text","styles","buildStyles","textColor","pathColor","ProjectContainer","isContributing","getSelectedProject","match","params","projectId","displayContributionForm","isSuccess","handleContributionFormSubmit","address","updateProfile","cancelEdit","Math","round","edit_profile","updateUserProfile","fd","FormData","append","toggleEditState","renderBottomComponent","contributed_materials","mat","floor","random","ContributionsList","allProjects","selectedProject","selectedProjectStoreInfo","userContributions","store_selected","currentStoreId","selectedStoreId","inputCoordinates","fabricFilters","resetState","filterByFabricTypes","getSelectedProjectStore","getUsersContributions","handleMarkerClick","storeId","fabricList","projectsArr","filteredProjects","forEach","fabricType","some","filterByFabricTypesWhenMarkerClicked","displayProjectList","pathname","toString","startsWith","getInputCoordinates","handleContributionSubmit","boxShadow","render","rest","FormProject","availableStores","availableFabric","getAllStores","handleChangeObj","handleChangeMaterials","handleFormSubmit","str","min","projectImage","materialsList","CreateProject","newVal","App","Dashboard","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b738b626.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst service = axios.create({\n  baseURL: process.env.REACT_APP_BACKEND_URL,\n  withCredentials: true, // Cookie is sent to client when using this service. (used for session)\n});\n\nfunction errorHandler(error) {\n  if (error.response.data) {\n    console.log(error.response && error.response.data);\n    throw error;\n  }\n  throw error;\n}\n\nexport default {\n  service,\n\n  signup(userInfo) {\n    return service\n      .post(\"/api/auth/signup\", userInfo)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  signin(userInfo) {\n    return service\n      .post(\"/api/auth/signin\", userInfo)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  isLoggedIn() {\n    return service\n      .get(\"/api/auth/isLoggedIn\")\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  logout() {\n    return service\n      .get(\"/api/auth/logout\")\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  // C\n  createOne(endPoint, data) {\n    return service.post(endPoint, data, {});\n  },\n\n  // R\n  getAll(endPoint) {\n    return service.get(endPoint);\n  },\n\n  getOne(endPoint, id) {\n    return service.get(endPoint + id);\n  },\n\n  // U\n  updateOne(endPoint, data) {\n    return service.patch(endPoint, data, {});\n  },\n\n  // D\n  deleteOne(endPoint, id) {\n    return service.delete(endPoint + id);\n  },\n\n  // Special requests :\n  getAllProjects(endPoint) {\n    return service.get(endPoint);\n  },\n\n  filterProjectsByFabric(endPoint, fabricArr) {\n    return service.get(endPoint, {params: {\n      filters: fabricArr,\n        bar: \"toto\"\n    }});\n  },\n};\n","import React from \"react\";\n\nexport const UserContext = React.createContext();\n","import React, { Component } from \"react\";\nimport apiHandler from \"../../api/apiHandler\";\nimport { UserContext } from \"./UserContext\";\n\nclass UserProvider extends Component {\n  state = {\n    user: null,\n    isLoggedIn: false,\n    isLoading: true,\n  };\n\n  componentDidMount() {\n    apiHandler\n      .isLoggedIn()\n      .then((data) => {\n        this.setState({ user: data, isLoggedIn: true, isLoading: false });\n      })\n      .catch((error) => {\n        this.setState({ user: null, isLoggedIn: false, isLoading: false });\n      });\n  }\n\n  setUser = (user) => {\n    this.setState({ user, isLoggedIn: true });\n  };\n\n  removeUser = () => {\n    this.setState({ user: null, isLoggedIn: false });\n  };\n\n  render() {\n    //  Setup all the values/functions you want to expose to anybody reading\n    // from the AuthContext.\n    const authValues = {\n      user: this.state.user,\n      setUser: this.setUser,\n      removeUser: this.removeUser,\n      isLoggedIn: this.state.isLoggedIn,\n      isLoading: this.state.isLoading,\n    };\n\n    return (\n      <UserContext.Provider value={authValues}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default UserProvider;\n","import React from \"react\";\nimport { UserContext } from \"./UserContext\";\n\n// This is what we call a HOC (Higher Order Component).\n// It takes a component as a parameter and it returns a component.\n// This technique can be used to abstract some logic in order to pass\n// some data down as props to the component sent as parameter.\n\n// The use case of this one is to make it easy to access the user context to\n// any component in our app.\n\n/* ******************************************************** */\n\n//  How to use:  =>\n// YourComponent.jsx\n// import React from \"react\"\n// function or class YourComponent()\n//\n// ... your implementation.\n//\n// export default withUser(YourComponent)\n// ----------------^ your component now has access to the user context defined in UserProvider.jsx.\n\nexport const withUser = (ComponentToPassUserContextTo) => {\n  return function (props) {\n    return (\n      <UserContext.Consumer>\n        {(context) => (\n          <ComponentToPassUserContextTo {...props} context={context} />\n        )}\n      </UserContext.Consumer>\n    );\n  };\n};\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { withUser } from \"../components/Auth/withUser\";\nimport apiHandler from \"../api/apiHandler\";\n\nconst NavMain = (props) => {\n  const { context } = props;\n\n  function handleLogout() {\n    apiHandler\n      .logout()\n      .then(() => {\n        context.removeUser();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  return (\n    <nav className=\"navbar\">\n      <div className=\"navbar-brand\">\n        <div className=\"navbar-item\">\n          <NavLink to=\"/\">\n            <h1 className=\"title is-3 has-text-dark-grey logo\">\n              ch<i className=\"fas fa-socks has-text-primary\"></i>c\n            </h1>\n          </NavLink>\n\n          <NavLink\n            to=\"/\"\n            role=\"button\"\n            className=\"navbar-burger\"\n            aria-label=\"menu\"\n            aria-expanded=\"false\"\n          >\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n          </NavLink>\n        </div>\n        <div className=\"navbar-item\">\n          {context.isLoggedIn && context.user.role === \"designer\" && (\n            <div className=\"button is-primary btn-scale-hover\">\n              <Link to=\"/create/project\">Create a project</Link>\n            </div>\n          )}\n        </div>\n      </div>\n      <div className=\"navbar-menu\">\n        <div className=\"navbar-start\"></div>\n        <div className=\"navbar-end\">\n          <div className=\"navbar-item\">\n            <div className=\"buttons\">\n              {context.isLoggedIn && (\n                <React.Fragment>\n                  <h2 className=\"button is-light has-text-dark-gray bold\">\n                    <NavLink to=\"/profile\">\n                      {context.user && context.user.userName} |{\" \"}\n                      {context.user && context.user.paillettes}{\" \"}\n                      <i className=\"fas fa-fire \"></i>\n                    </NavLink>\n                  </h2>\n                  <NavLink\n                    to=\"/signin\"\n                    className=\"button is-danger is-light\"\n                    onClick={handleLogout}\n                  >\n                    <i className=\"fas fa-power-off\"></i>\n                  </NavLink>\n                </React.Fragment>\n              )}\n              {!context.isLoggedIn && (\n                <React.Fragment>\n                  <div className=\"button is-primary is-outlined\">\n                    <NavLink to=\"/signin\">Log in</NavLink>\n                  </div>\n                  <div className=\"button is-primary\">\n                    <NavLink to=\"/signup\">Create account</NavLink>\n                  </div>\n                </React.Fragment>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default withUser(NavMain);\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { UserContext } from \"../Auth/UserContext\";\nimport { withRouter } from \"react-router-dom\";\nimport apiHandler from \"../../api/apiHandler\";\n\nclass FormSignin extends Component {\n  static contextType = UserContext;\n\n  state = {\n    email: \"\",\n    password: \"\",\n  };\n\n  handleChange = (event) => {\n    const key = event.target.name;\n\n    // You can test more if you have to handle different sorts of inputs.\n    const value =\n      event.target.type === \"file\"\n        ? event.target.files[0]\n        : event.target.type === \"checkbox\"\n        ? event.target.checked\n        : event.target.value;\n\n    this.setState({ [key]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    apiHandler\n      .signin(this.state)\n      .then((data) => {\n        this.context.setUser(data);\n        this.props.history.push(\"/\");\n      })\n      .catch((error) => {\n        console.log(error);\n        this.setState({ message: error });\n      });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <h1 className=\"title is-4\">Sign in</h1>\n        <p className=\"description\">Welcome back!</p>\n\n        {this.state.message && (\n          <React.Fragment>\n            <p className=\"has-text-danger\">\n              <i class=\"fas fa-exclamation-triangle\"></i> Invalid credentials\n            </p>{\" \"}\n            <br />\n          </React.Fragment>\n        )}\n\n        <form onChange={this.handleChange} onSubmit={this.handleSubmit}>\n          <div className=\"field\">\n            <div className=\"control has-icons-left\">\n              <input\n                className=\"input\"\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                placeholder=\"Email\"\n              />\n              <div className=\"icon is-small is-left\">\n                <i className=\"fas fa-envelope\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"field\">\n            <div className=\"control has-icons-left\">\n              <input\n                className=\"input\"\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n              />\n              <div className=\"icon is-small is-left\">\n                <i className=\"fas fa-lock\"></i>\n              </div>\n            </div>\n          </div>\n          <button className=\"button is-block is-primary is-fullwidth\">\n            Submit\n          </button>\n          <br />\n          <small>\n            <span>Not account yet? Signup</span>{\" \"}\n            <Link to=\"/signup\">\n              <span className=\"has-text-primary\">now.</span>\n            </Link>\n          </small>\n        </form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withRouter(FormSignin);\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { UserContext } from \"../Auth/UserContext\";\nimport { Link } from \"react-router-dom\";\nimport apiHandler from \"../../api/apiHandler\";\n\nclass FormSignup extends Component {\n  static contextType = UserContext;\n\n  state = {\n    email: \"\",\n    password: \"\",\n    userName: \"\",\n    role: \"user\",\n  };\n\n  handleChange = (event) => {\n    const value =\n      event.target.type === \"file\"\n        ? event.target.files[0]\n        : event.target.type === \"checkbox\"\n        ? event.target.checked\n        : event.target.type === \"radio\"\n        ? event.target.id\n        : event.target.value;\n\n    const key = event.target.name;\n\n    this.setState({ [key]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    apiHandler\n      .signup(this.state)\n      .then((data) => {\n        this.context.setUser(data);\n        this.props.history.push(\"/\");\n      })\n      .catch((error) => {\n        this.setState({ message: error });\n      });\n  };\n\n  render() {\n    console.log(this.state.message);\n    return (\n      <React.Fragment>\n        <h1 className=\"title is-4\">Create an account</h1>\n        <p className=\"description\">\n          We need a few informations about you. Who are you?\n        </p>\n\n        <form onChange={this.handleChange} onSubmit={this.handleSubmit}>\n          <div className=\"control\">\n            <label\n              className={\n                this.state.role === \"designer\"\n                  ? \"is-primary tag is-large radio role-radio\"\n                  : \"tag is-large radio role-radio\"\n              }\n            >\n              <input\n                onChange={this.handleChange}\n                type=\"radio\"\n                name=\"role\"\n                id=\"designer\"\n                checked={this.state.role === \"designer\" ? true : false}\n              />\n              Designer\n            </label>\n            <label\n              className={\n                this.state.role === \"user\"\n                  ? \"is-primary tag is-large radio role-radio\"\n                  : \"tag is-large radio role-radio\"\n              }\n            >\n              <input\n                onChange={this.handleChange}\n                id=\"user\"\n                type=\"radio\"\n                name=\"role\"\n                checked={this.state.role === \"user\"}\n              />\n              User\n            </label>\n          </div>\n          <div className=\"field\">\n            <div className=\"control has-icons-left\">\n              <input\n                className=\"input\"\n                type=\"text\"\n                id=\"username\"\n                name=\"userName\"\n                placeholder=\"Username\"\n                required={true}\n              />\n              <div className=\"icon is-small is-left\">\n                <i className=\"fas fa-user\"></i>\n              </div>\n            </div>\n          </div>\n\n          {this.state.message && (\n            <React.Fragment>\n              <p className=\"has-text-danger\">\n                <i class=\"fas fa-exclamation-triangle\"></i> This email already\n                exists\n              </p>{\" \"}\n              <br />\n            </React.Fragment>\n          )}\n\n          <div className=\"field\">\n            <div className=\"control has-icons-left\">\n              <input\n                className=\"input\"\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                placeholder=\"Email\"\n                required={true}\n              />\n              <div className=\"icon is-small is-left\">\n                <i className=\"fas fa-envelope\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"field\">\n            <div className=\"control has-icons-left\">\n              <input\n                className=\"input\"\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                required={true}\n              />\n              <div className=\"icon is-small is-left\">\n                <i className=\"fas fa-lock\"></i>\n              </div>\n            </div>\n          </div>\n          <button className=\"button is-block is-primary is-fullwidth\">\n            Submit\n          </button>\n          <br />\n          <small>\n            <span>Already have an account? Signin</span>{\" \"}\n            <Link to=\"/signin\">\n              <span className=\"has-text-primary\">here.</span>\n            </Link>\n          </small>\n        </form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withRouter(FormSignup);\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport FormSignin from \"../components/Forms/FormSignin\";\nimport FormSignup from \"../components/Forms/FormSignup\";\n\nimport \"../styles/Home.scss\";\n\nclass Home extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"fullscreen-container\">\n          <div className=\"blocks-container\">\n            <div className=\"left block-home\">\n              <h1 className=\"title is-1\">A second life for your clothes!</h1>\n              <h2 className=\"subtitle colored is-4\">\n                Give materials, help creators, get rewards.\n              </h2>\n              <p>\n                Tired of your old clothes getting dust in your closet? <br/>\n                Why not get rid of them and help your local disigners?! <br/>\n                Join the CHIIC project and make the world a slightly more fair, stylich and ecofriendly place! \n              </p>\n            </div>\n\n            <div className=\"right block-home\">\n              <Switch>\n                <Route exact path=\"/signup\" component={FormSignup} />\n                <Route exact path=\"/home\" component={FormSignup} />\n                <Route exact path=\"/signin\" component={FormSignin} />\n              </Switch>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Home;\n","import React, { Component } from \"react\";\n\nclass Checkbox extends Component {\n  state = {\n    isChecked: false,\n  };\n\n  toggleChange = () => {\n    this.setState({\n      isChecked: !this.state.isChecked,\n    });\n    this.props.onChange(this.props.label);\n  };\n\n  toggleColor = (event) => {\n    event.target.parentNode.classList.toggle(\"is-primary\");\n  };\n\n  render() {\n    return (\n      <label className=\"checkbox tag\">\n        <input\n          type=\"checkbox\"\n          checked={this.state.isChecked}\n          onChange={this.toggleChange}\n          onClick={this.toggleColor}\n        />\n        {this.props.label}\n      </label>\n    );\n  }\n}\n\nexport default Checkbox;\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nclass LocationAutoComplete extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      search: \"\",\n      results: [],\n      isLoading: false,\n    };\n    this.handleSearchChange = this.handleSearchChange.bind(this);\n\n    if (!process.env.REACT_APP_MAPBOX_TOKEN) {\n      throw new Error(\n        \"You don't have any 'process.env.REACT_APP_MAPBOX_API_KEY'\"\n      );\n    }\n  }\n\n  handleSearchChange(e) {\n    this.setState({\n      search: e.target.value,\n      isLoading: true,\n    });\n\n    // Stop the previous setTimeout if there is one in progress\n    clearTimeout(this.timeoutId);\n\n    // Launch a new request in 1000ms (1s) => Avoids excessive requests to the end point.\n    this.timeoutId = setTimeout(() => {\n      this.performSearch();\n    }, 1000);\n  }\n\n  performSearch() {\n    if (this.state.search === \"\") {\n      this.setState({\n        results: [],\n        isLoading: false,\n      });\n      return;\n    }\n\n    axios\n      .get(\n        `https://api.mapbox.com/geocoding/v5/mapbox.places/${this.state.search}.json?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`\n      )\n      .then((response) => {\n        this.setState({\n          results: response.data.features,\n          isLoading: false,\n        });\n      });\n  }\n\n  handleItemClicked(place) {\n    this.setState({\n      search: place.place_name,\n      results: [],\n    });\n\n    this.props.onSelect(place);\n  }\n\n  render() {\n    return (\n      <div className=\"LocationAutoComplete\">\n        <div className=\"control has-icons-left has-icons-right\">\n          <input\n            className=\"input is-rounded searchbar\"\n            type=\"text\"\n            value={this.state.search}\n            onChange={this.handleSearchChange}\n            placeholder=\"Enter an address to find a store\"\n          />\n          <div className=\"icon is-small is-left\">\n            <i className=\"fas fa-search\"></i>\n          </div>\n        </div>\n\n        <ul className=\"location-autocomplete-results\">\n          {this.state.results.map((place) => (\n            <li\n              key={place.id}\n              className=\"location-autocomplete-items has-text-grey\"\n              onClick={() => this.handleItemClicked(place)}\n            >\n              <p>{place.place_name}</p>\n            </li>\n          ))}\n          {this.state.isLoading && (\n            <li className=\"location-autocomplete-items has-text-grey\">\n              Loading...\n            </li>\n          )}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default LocationAutoComplete;\n","import React, { Component } from \"react\";\nimport Checkbox from \"./Tools/Checkbox\";\nimport LocationAutoComplete from \"./Tools/LocationAutocomplete\";\n\nconst fabric_types = [\"cotton\", \"linen\", \"silk\", \"wool\", \"artificial fibers\"];\n\nclass Searchbar extends Component {\n  state = {\n    fabric_types: [],\n  };\n\n  componentDidUpdate = (prevProps, prevState) => {\n    if (prevState !== this.state) {\n      this.filterByFabric();\n    }\n  };\n\n  filterByFabric = () => {\n    if (this.state.fabric_types.length === 0 && !this.props.isStoreSelected) {\n      this.props.displayAllProjects();\n    } else {\n      this.props.filterByFabricType(this.state.fabric_types);\n    }\n  };\n\n  handleCheckChanges = (label) => {\n    const labelStr = String(label);\n    const fabricArr = this.state.fabric_types;\n    if (fabricArr.length === 0 || !fabricArr.includes(labelStr))\n      fabricArr.push(labelStr);\n    else {\n      for (let i = 0; i < fabricArr.length; i++) {\n        if (fabricArr[i] === labelStr) fabricArr.splice(i, 1);\n      }\n    }\n    this.setState({ fabric_types: fabricArr });\n  };\n\n  handlePlace = (place) => {\n    this.props.sendCoordinates(place.geometry.coordinates);\n  };\n\n  render() {\n    return (\n      <div className=\"left-block-top\">\n        <LocationAutoComplete onSelect={this.handlePlace} />\n        <div className=\"checkbox-container\">\n          <span>Filter by materials:</span>\n          {fabric_types.map((elm) => (\n            <Checkbox\n              key={elm}\n              label={elm}\n              value={elm}\n              onChange={this.handleCheckChanges}\n            />\n          ))}\n        </div>\n        <div className=\"projects-found\">\n          <h3 className=\"bold has-text-grey\">\n            {this.props.projectsNumber} project(s) found:\n          </h3>\n          {this.props.isStoreSelected && (\n            <div>\n              <button\n                className=\"button is-primary is-small is-light\"\n                onClick={this.props.handleResetClick}\n              >\n                show all\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\nexport default Searchbar;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport DayJS from \"react-dayjs\";\nimport apiHandler from \"../../api/apiHandler\";\n\nclass ProjectCard extends React.Component {\n  state = {\n    store_address: \"Loading...\",\n    store_name: \"Loading...\",\n    creator_pic: \"Loading...\",\n  };\n\n  componentDidMount = () => {\n    this.getStoreInfo();\n    this.getUserInfo();\n  };\n\n  getUserInfo = () => {\n    let query;\n    (this.props.creator._id) ? query = this.props.creator._id : query = this.props.creator;\n    apiHandler\n    .getOne(\"/api/users/\", query)\n    .then((apiRes) => {\n      this.setState({\n        creator_pic: apiRes.data.profilePicture,\n      });\n    })\n      .catch((err) => console.log(err));\n  };\n\n  getStoreInfo = () => {\n    apiHandler\n      .getOne(\"/api/stores/\", this.props.store_id)\n      .then((apiRes) => {\n        this.setState({\n          store_address: apiRes.data.location.formattedAddress,\n          store_name: apiRes.data.name,\n        });\n      })\n      .catch((err) => console.log(err));\n  };\n\n  getItemsCollected = () => {\n    let qt = 0;\n    this.props.materials.map((material) => {\n      return (qt += material.collected_quantity);\n    });\n    return qt;\n  };\n\n  getTotalItemsRequired = () => {\n    let max = 0;\n    this.props.materials.map((material) => {\n      return (max += material.required_quantity);\n    });\n    return max;\n  };\n\n  render() {\n    return (\n      <div\n        className=\"item-card\"\n        onClick={() => this.props.displayProject(this.props.id)}\n      >\n        <Link to={`/project/${this.props.id}`}>\n          <div className=\"card-content-container\">\n            <div className=\"left-container\">\n              <div className=\"card-img image is-96x96\">\n                <img\n                  className=\"is-rounded\"\n                  src={this.state.creator_pic}\n                  alt=\"creator-pic\"\n                />\n              </div>\n              <div className=\"card-infos\">\n                <p className=\"has-text-grey\">{this.props.creator.userName}</p>\n                <h3 className=\"has-text-grey-dark bold\">{this.props.name}</h3>\n                <div className=\"location-container has-text-grey\">\n                  <span>\n                    <i className=\"fas fa-store-alt has-text-grey\"></i>{\" \"}\n                    {this.state.store_name}\n                  </span>\n                  <span>\n                    <i className=\"fas fa-map-marker-alt has-text-grey\"></i>{\" \"}\n                    {this.state.store_address}\n                  </span>\n                </div>\n                <div className=\"card-tags\">\n                  {this.props.materials.map((material) => (\n                    <div\n                      key={material.fabric_type}\n                      className=\"a-tag tag is-info is-light\"\n                    >\n                      {material.fabric_type}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n            <div className=\"card-state\">\n              <p className=\"tag is-warning is-light\">\n                {this.getItemsCollected()}/{this.getTotalItemsRequired()} items\n                collected\n              </p>\n              <span className=\"has-text-grey\">\n                <DayJS format=\"MMM D, YYYY\">{this.props.deadline}</DayJS>\n              </span>\n            </div>\n          </div>\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default ProjectCard;\n","import React from \"react\";\nimport ProjectCard from \"./ProjectCard\";\n\nclass ProjectList extends React.Component {\n  render() {\n    const props = this.props;\n    return (\n      <React.Fragment>\n        {/* {props.isStoreSelected && (\n          <div>\n            <button\n              className=\"button is-primary is-light\"\n              onClick={props.handleResetClick}\n            >\n              Display all\n            </button>\n          </div>\n        )} */}\n        <div className=\"card-list\">\n          {props.projects.map((project) => (\n            <React.Fragment key={project._id}>\n              <ProjectCard\n                key={project._id}\n                id={project._id}\n                name={project.name}\n                description={project.description}\n                creator={project.creator}\n                materials={project.materials}\n                deadline={project.deadline}\n                store_id={project.store}\n                displayProject={props.currentProject}\n              />\n            </React.Fragment>\n          ))}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ProjectList;\n","import React, { Component } from \"react\";\nimport apiHandler from \"../api/apiHandler\";\nimport ReactMapboxGl from \"react-mapbox-gl\";\nimport { Marker, Popup } from \"react-mapbox-gl\";\n\nconst Map = ReactMapboxGl({\n  accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n});\n\nclass HomeMap extends Component {\n  state = {\n    stores: null,\n    location: [2.35140, 48.85658],\n  };\n\n  componentDidMount = () => {\n    apiHandler\n      .getAll(\"/api/stores\")\n      .then((apiRes) => this.setState({ stores: apiRes.data }))\n      .catch((apiErr) => console.log(apiErr));\n  };\n\n  handleClickMarker = (id) => {\n    this.props.handleMarkClic(id);\n    // openPopup(id);\n    console.log('hello');\n  }\n\n  render() {\n    const stores = this.state.stores;\n    const mapElmStyle = {\n      width: 4 + \"vw\",\n      borderRadius: \"50%\",\n      borderColor: \"white\",\n      cursor: \"pointer\",\n    };\n    const mapstyle = { style: \"mapbox://styles/mapbox/light-v10\" };\n    return (\n      <div>\n        {this.props.searchInput && (\n          <React.Fragment>\n            <Map\n              style={mapstyle.style}\n              center={this.props.searchInput}\n              zoom={[12]}\n              containerStyle={{\n                height: \"96vh\",\n                width: \"100vw\",\n                borderRadius: \"20px\",\n                // focus: \"outline:0\"\n              }}\n            >\n              {stores\n                ? stores.map((elm) => (\n                    <Marker\n                      key={elm._id}\n                      coordinates={elm.location.coordinates}\n                      anchor=\"bottom\"\n                      onClick={() => this.handleClickMarker(elm._id)}\n                    >\n                      <img alt={elm.name} style={mapElmStyle} src={elm.image}/>\n                    </Marker>\n                  ))\n                : null}\n            </Map>\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default HomeMap;\n","import React from \"react\";\n\nconst ListTitle = () => {\n  return (\n    <div className=\"left-block-top\">\n      <div className=\"profile-list-title\">\n        <h2 className=\"tag is-medium is-primary is-light\">Your contributions</h2>\n      </div>\n    </div>\n  );\n};\n\nexport default ListTitle;\n","import React from \"react\";\n\nclass Progress extends React.Component {\n  getValue = () => {\n    let max = 0;\n    let qt = 0;\n    this.props.materials.map((material) => {\n      max += material.required_quantity;\n      qt += material.collected_quantity;\n      return (max, qt);\n    });\n    let value = (qt / max) * 100;\n    return value.toFixed();\n  };\n\n  render() {\n    return (\n      <div className=\"progressbar-container\">\n        {this.props.materials && (\n          <React.Fragment>\n            <h3>\n              This project is{\" \"}\n              <span className=\"bold has-text-dark-gray is-medium\">{this.getValue()}%</span>{\" \"}\n              completed\n            </h3>\n            <progress\n              className=\"progress is-primary\"\n              value={this.getValue()}\n              max=\"100\"\n            ></progress>\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Progress;\n","import React from \"react\";\n\nclass Contributors extends React.Component {\n  displayContributors = () => {\n    if (this.props.contributors.length === 0) {\n      return (\n        <div>\n          <p>No contributor yet, be the first!</p>\n        </div>\n      );\n    } else {\n      return this.props.contributors.map((contributor) => (\n        <div key={contributor._id} className=\"contributor-item\">\n          <figure className=\"image is-96x96\">\n            <img\n              className=\"is-rounded\"\n              src={contributor.id_user.profilePicture}\n              alt=\"contributor\"\n            />\n          </figure>\n          <span>{contributor.id_user.userName}</span>\n        </div>\n      ));\n    }\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <h3 className=\"has-text-dark-gray bold\">Contributors:</h3>\n        <div className=\"contributors-container\">\n          {this.props.contributors && this.displayContributors()}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Contributors;\n","import React from \"react\";\n\nclass FormContribution extends React.Component {\n  state = {\n    fabric_type: this.props.project.materials[0].fabric_type,\n    quantity: \"\",\n  };\n\n  handleSubmit = (evt) => {\n    evt.preventDefault();\n    this.props.handleContributionForm(this.state);\n    this.props.goBack();\n  };\n\n  handleChange = (evt) => {\n    this.setState({ [evt.target.name]: evt.target.value });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"bottom-form-container\">\n          <div>\n            <img className=\"illu-gift\" src=\"/gift-woman.svg\" alt=\"illu-gift\" />\n          </div>\n          <div className=\"form-container\">\n            <h3 className=\"has-text-dark-gray bold\">\n              What do you want to give?\n            </h3>\n            <form className=\"field \" onSubmit={this.handleSubmit}>\n              <div className=\"field has-addons\">\n                <div className=\"control\">\n                  <div className=\"select\">\n                    <select name=\"fabric_type\" onChange={this.handleChange}>\n                      {this.props.project.materials &&\n                        this.props.project.materials.map((material) => {\n                          return (\n                            <option key={material.fabric_type}>\n                              {material.fabric_type}\n                            </option>\n                          );\n                        })}\n                    </select>\n                  </div>\n                </div>\n                <p className=\"control\">\n                  <input\n                    className=\"input\"\n                    name=\"quantity\"\n                    type=\"number\"\n                    placeholder=\"Amount\"\n                    onChange={this.handleChange}\n                  />\n                </p>\n              </div>\n\n              <div className=\"field is-grouped\">\n                <p className=\"control\">\n                  <button className=\"button is-primary\">Submit</button>\n                </p>\n                <p className=\"control\">\n                  <span\n                    onClick={() => this.props.goBack()}\n                    className=\"button is-light\"\n                  >\n                    Cancel\n                  </span>\n                </p>\n              </div>\n            </form>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default FormContribution;\n","import React, { Component } from 'react';\nimport dayjs from 'dayjs';\n\nexport default class DateFormat extends Component {\n    \n    changeDate = (date) => {\n        return dayjs(date).format(this.props.format)\n    }\n    \n    render() {\n        return (\n            <div>\n                {this.changeDate(this.props.date)}\n            </div>\n        )\n    }\n}\n","import React from \"react\";\nimport { buildStyles, CircularProgressbar } from \"react-circular-progressbar\";\nimport \"react-circular-progressbar/dist/styles.css\";\n\nconst CircleProgressBar = (props) => {\n  return (\n    <React.Fragment>\n      <div className=\"circle-progress-item\">\n        <CircularProgressbar\n          maxValue={props.material.required_quantity}\n          value={props.material.collected_quantity}\n          text={`${props.material.collected_quantity}/${props.material.required_quantity}`}\n          styles={buildStyles({\n            textColor: \"#00D1B2\",\n            pathColor: \"#00D1B2\",\n          })}\n        />\n        <p className=\"tag legend-circle-progress\">{props.material.fabric_type}</p>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default CircleProgressBar;\n","import React from \"react\";\nimport \"../../styles/ProjectContainer.scss\";\nimport { Link } from \"react-router-dom\";\nimport Progress from \"./Progress\";\nimport Contributors from \"./Contributors\";\nimport FormContribution from \"../Forms/FormContribution\";\nimport DateFormat from '../Tools/DateFormat';\nimport CircleProgressBar from \"../Tools/CircleProgressBar\";\nimport apiHandler from \"../../api/apiHandler\";\n\nclass ProjectContainer extends React.Component {\n  state = {\n    isContributing: false,\n    currentProject: \"\",\n  };\n\n  componentDidMount = () => {\n    if (this.props.project.length === 0)\n      this.getSelectedProject(this.props.match.params.id);\n  };\n\n  getSelectedProject = (projectId) => {\n    apiHandler\n      .getOne(\"/api/projects/\", projectId)\n      .then((apiRes) => {\n        this.setState({\n          currentProject: apiRes.data,\n        });\n      })\n      .catch((err) => console.log(err));\n  };\n\n  displayContributionForm = () => {\n    this.setState((prevState) => ({\n      isContributing: !prevState.isContributing,\n    }));\n  };\n\n  render() {\n    let project;\n    this.props.project.length === 0\n      ? (project = this.state.currentProject)\n      : (project = this.props.project);\n    return (\n      <div className=\"project-grid-container\">\n        <div className=\"project-info\">\n          <div className=\"project-infos-header\">\n            <Link to=\"/\">\n              <span className=\"delete close-btn is-medium\"></span>\n            </Link>\n            <h1 className=\"bold has-text-dark-gray\">{project.name}</h1>\n            <p>\n              launched by{\" \"}\n              {project.creator && (\n                <span className=\"tag is-info is-light\">\n                  {project.creator.userName}\n                </span>\n              )}{\" \"}\n              | deadline:{\" \"}\n              {project.deadline && (\n                <span className=\"tag is-warning is-light\">\n                  <DateFormat format=\"MMMM D, YYYY\" date={project.deadline}/>\n                </span>\n              )}\n            </p>\n            <div className=\"project-description\">\n              <i className=\"fas fa-quote-left has-text-grey-lighter fa-lg\"></i>\n              <p>\n                <i>{project.description}</i>\n              </p>\n              <i className=\"fas fa-quote-right has-text-grey-lighter fa-lg\"></i>\n            </div>\n            <div className=\"project-location\">\n              <h3 className=\"has-text-dark-gray bold\">Drop your items here:</h3>\n              {this.props.store.location && (\n                <React.Fragment>\n                  <p>\n                    <i className=\"fas fa-store-alt has-text-primary\"></i>{\" \"}\n                    {this.props.store.name}\n                  </p>\n                  <p>\n                    <i className=\"fas fa-map-marker-alt has-text-primary\"></i>{\" \"}\n                    {this.props.store.location.formattedAddress}\n                  </p>\n                </React.Fragment>\n              )}\n            </div>\n            <Progress\n              isSuccess={project.isSuccess}\n              materials={project.materials}\n            />\n          </div>\n          {!this.state.isContributing && project.isSuccess === false && (\n            <button\n              onClick={this.displayContributionForm}\n              className=\"button is-primary contribute-btn btn-scale-hover\"\n            >\n              contribute\n            </button>\n          )}\n          {project.isSuccess && (\n            <>\n              <h3>\n                <span role=\"img\" aria-label=\"congratulation\">\n                  🙌\n                </span>{\" \"}\n                We did it!{\" \"}\n                <span role=\"img\" aria-label=\"congratulation\">\n                  💪\n                </span>\n                Thank you!!!\n              </h3>\n            </>\n          )}\n        </div>\n        <hr />\n\n        <div className=\"bottom-container\">\n          {this.state.isContributing ? (\n            <FormContribution\n              project={project}\n              goBack={this.displayContributionForm}\n              handleContributionForm={this.props.handleContributionFormSubmit}\n            />\n          ) : (\n            <React.Fragment>\n              <h3 className=\"has-text-dark-gray bold\">Required materials:</h3>\n              <div className=\"circle-gauges-container\">\n                {project.materials &&\n                  project.materials.map((material) => (\n                    <CircleProgressBar key={material._id} material={material} />\n                  ))}\n              </div>\n              <hr />\n              <Contributors contributors={project.contributors} />\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProjectContainer;\n","import React, { Component } from \"react\";\nimport { withUser } from \"../Auth/withUser\";\n\nclass FormUser extends Component {\n  state = {\n    userName: this.props.userName,\n    email: this.props.email,\n    address: this.props.address,\n  };\n\n  handleChange = (event) => {\n    const value =\n      event.target.type === \"file\"\n        ? event.target.files[0]\n        : event.target.type === \"checkbox\"\n        ? event.target.checked\n        : event.target.value;\n    const key = event.target.name;\n    this.setState({ [key]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.props.updateProfile(this.state);\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label className=\"label\">Profile picture</label>\n        <div className=\"file is-small\">\n          <label className=\"file-label\">\n            <input\n              className=\"file-input\"\n              type=\"file\"\n              name=\"profilePicture\"\n              onChange={this.handleChange}\n            />\n            <span className=\"file-cta\">\n              <span className=\"file-icon\">\n                <i className=\"fas fa-upload\"></i>\n              </span>\n              <span className=\"file-label\">Choose a file…</span>\n            </span>\n          </label>\n        </div>\n\n        <div className=\"field\">\n          <label className=\"label\">Username</label>\n          <div className=\"control\">\n            <input\n              className=\"input\"\n              type=\"text\"\n              name=\"userName\"\n              placeholder=\"e.g Alex Smith\"\n              onChange={this.handleChange}\n              value={this.state.userName}\n            />\n          </div>\n        </div>\n\n        <div className=\"field\">\n          <label className=\"label\">Email</label>\n          <div className=\"control\">\n            <input\n              className=\"input\"\n              type=\"email\"\n              name=\"email\"\n              value={this.state.email}\n              placeholder=\"e.g. alexsmith@gmail.com\"\n              onChange={this.handleChange}\n            />\n          </div>\n        </div>\n\n        <div className=\"field\">\n          <label className=\"label\">Address</label>\n          <div className=\"control\">\n            <input\n              className=\"input\"\n              type=\"text\"\n              name=\"address\"\n              placeholder=\"e.g. 40 boulevard Voltaire, Paris\"\n              onChange={this.handleChange}\n              value={this.state.address}\n            />\n          </div>\n        </div>\n\n        <div className=\"field is-grouped is-grouped-right\">\n          <p className=\"control\">\n            <button className=\"button is-primary\">Save</button>\n          </p>\n          <p className=\"control\">\n            <span\n              onClick={() => this.props.cancelEdit()}\n              className=\"button is-light\"\n            >\n              Cancel\n            </span>\n          </p>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default withUser(FormUser);\n","import React from \"react\";\nimport { buildStyles, CircularProgressbar } from \"react-circular-progressbar\";\nimport { withUser } from \"../../components/Auth/withUser\";\nimport \"react-circular-progressbar/dist/styles.css\";\n\nconst PointsCounter = (props) => {\n  const goal = 80;\n\n  return (\n    <React.Fragment>\n      <div className=\"bottom-block-paillettes\">\n        <div className=\"counter\">\n          <CircularProgressbar\n            maxValue={goal}\n            value={props.context.user.paillettes}\n            text={`${Math.round((props.context.user.paillettes/goal)*100)}%`}\n            styles={buildStyles({\n              textColor: \"#00D1B2\",\n              pathColor: \"#00D1B2\",\n            })}\n          />\n        </div>\n        <div className=\"paillettes-infos\">\n          <h3 className=\"bold has-text-dark-gray\">\n            You collected{\" \"}\n            <span className=\"tag is-primary is-light\">{props.context.user.paillettes} paillette(s)</span>\n          </h3>\n          <p>Only { goal - props.context.user.paillettes } paillette(s) left until next reward!</p>\n          <span className=\"paillettes-rules\">\n            <i className=\"fas fa-info-circle has-text-primary\"></i> 1 item\n            contributed = 1 paillette\n          </span>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default withUser(PointsCounter);\n","import React from \"react\";\nimport \"../../styles/ProfileContainer.scss\";\nimport FormUser from \"../Forms/FormUser\";\nimport PointsCounter from \"./PointsCounter\";\nimport { withUser } from \"../Auth/withUser\";\nimport apiHandler from \"../../api/apiHandler\";\nimport { Link } from \"react-router-dom\";\n\nclass ProfileContainer extends React.Component {\n  state = {\n    edit_profile: false,\n  };\n\n  updateUserProfile = (data) => {\n    // console.log(data);\n    const fd = new FormData();\n    for (let key in data) {\n      fd.append(key, data[key]);\n    }\n    apiHandler\n      .updateOne(`/api/users/${this.props.context.user._id}`, fd)\n      .then((apiRes) => {\n        this.props.context.setUser(apiRes.data);\n        this.toggleEditState();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  toggleEditState = () => {\n    this.setState((prevState) => ({\n      edit_profile: !prevState.edit_profile,\n    }));\n  };\n\n  renderBottomComponent = () => {\n    return this.state.edit_profile ? (\n      <FormUser\n        userName={this.props.context.user.userName}\n        email={this.props.context.user.email}\n        address={this.props.context.user.address}\n        profilePicture={this.props.context.user.profilePicture}\n        updateProfile={this.updateUserProfile}\n        cancelEdit={this.toggleEditState}\n      />\n    ) : (\n      <PointsCounter />\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"profile-grid-container\">\n        <Link to=\"/\">\n          <span className=\"delete is-medium\"></span>\n        </Link>\n        <div className=\"top-block\">\n          <figure className=\"image is-128x128\">\n            <img\n              className=\"is-rounded\"\n              src={this.props.context.user.profilePicture}\n              alt={`${this.props.context.user.userName}-profile-pic`}\n            />\n          </figure>\n          <h1 className=\"has-text-dark-gray bold\">\n            {this.props.context.user.userName}\n          </h1>\n          <h3>{this.props.context.user.email}</h3>\n          <h3>{this.props.context.user.address}</h3>\n          {!this.state.edit_profile && (\n            <button\n              onClick={this.toggleEditState}\n              className=\"button is-primary is-outlined edit-profile-btn\"\n            >\n              <span>\n                edit <i className=\"fas fa-user-edit\"></i>\n              </span>\n            </button>\n          )}\n        </div>\n\n        <hr />\n\n        <div className=\"bottom-block\">{this.renderBottomComponent()}</div>\n      </div>\n    );\n  }\n}\n\nexport default withUser(ProfileContainer);\n","import React from \"react\";\nimport { withUser } from \"../Auth/withUser\";\n\nconst ContributionCard = (props) => {\n  return (\n    <div className=\"item-card\">\n      <div className=\"card-content-container\">\n        <div className=\"left-container\">\n          <div className=\"card-img-contribution\">\n            <i className=\"fas fa-4x has-text-white-ter fa-hand-holding-heart\"></i>\n          </div>\n          <div className=\"card-infos\">\n            <p className=\"has-text-grey\">{props.project.creator.userName}</p>\n            <h3 className=\"has-text-grey-dark bold\">{props.project.name}</h3>\n            <p>You contributed with:</p>\n            <div className=\"card-tags\">\n              {props.project.contributors.map((contributor) => {\n                if (contributor.id_user._id === props.context.user._id)\n                  return contributor.contributed_materials.map((mat) => (\n                    <div key={mat._id} className=\"a-tag tag is-info is-light\">\n                      {mat.quantity} piece(s) of {mat.fabric_type}\n                    </div>\n                  ));\n                return null;\n              })}\n            </div>\n          </div>\n        </div>\n        <div className=\"card-state\">\n          <p className=\"tag is-warning is-light\">\n            n°{Math.floor(Math.random() * 2000)}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withUser(ContributionCard);\n","import React from \"react\";\nimport ContributionCard from \"./ContributionCard\";\n\nconst ContributionsList = (props) => {\n  return (\n    <div className=\"card-list\">\n      {props.projects.map((project) => (\n        <ContributionCard key={project._id} project={project} />\n      ))}\n    </div>\n  );\n};\n\nexport default ContributionsList;\n","import React from \"react\";\nimport Searchbar from \"../components/Searchbar\";\nimport ProjectList from \"../components/Project/ProjectList\";\nimport apiHandler from \"../api/apiHandler\";\nimport HomeMap from \"../components/HomeMap\";\nimport ListTitle from \"../components/Profile/ListTitle\";\nimport ProjectContainer from \"../components/Project/ProjectContainer\";\nimport ProfileContainer from \"../components/Profile/ProfileContainer\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { withUser } from \"../components/Auth/withUser\";\nimport ContributionsList from \"../components/Profile/ContributionList\";\n\nclass Dashboard extends React.Component {\n  state = {\n    projects: [],\n    allProjects: [],\n    selectedProject: [],\n    selectedProjectStoreInfo: [],\n    userContributions: [],\n    store_selected: false,\n    currentStoreId: null,\n    selectedStoreId: null,\n    inputCoordinates: [2.3968998, 48.8651136], // default Paris coordinates 20th arrondissement\n    fabricFilters: [],\n  };\n\n  componentDidMount() {\n    this.resetState();\n    if (this.props.context.user) this.getUsersContributions();\n  }\n\n  // componentDidUpdate = () => {\n\n  // }\n\n  resetState = () => {\n    apiHandler\n      .getAll(\"/api/projects\")\n      .then((apiRes) => {\n        this.setState({\n          projects: apiRes.data,\n          allProjects: apiRes.data,\n          store_selected: false,\n          currentStoreId: null,\n        });\n        if (this.state.fabricFilters.length > 0)\n          this.filterByFabricTypes(this.state.fabricFilters);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  getSelectedProject = (projectId) => {\n    apiHandler\n      .getOne(\"/api/projects/\", projectId)\n      .then((apiRes) => {\n        this.setState({\n          selectedProject: apiRes.data,\n        });\n        this.getSelectedProjectStore();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  getSelectedProjectStore = () => {\n    apiHandler\n      .getOne(\"/api/stores/\", this.state.selectedProject.store)\n      .then((apiRes) => {\n        this.setState({\n          selectedProjectStoreInfo: apiRes.data,\n        });\n      })\n      .catch((err) => console.log(err));\n  };\n\n  getUsersContributions = () => {\n    apiHandler\n      .getAllProjects(\"/api/projects/user\")\n      .then((apiRes) => {\n        this.setState({\n          userContributions: apiRes.data,\n        });\n      })\n      .catch((err) => console.log(err));\n  };\n\n  handleMarkerClick = (storeId) => {\n    // console.log(storeId);\n    apiHandler\n      .getAllProjects(\"/api/projects/stores/\" + storeId)\n      .then((apiRes) => {\n        this.setState({\n          projects: apiRes.data,\n          store_selected: true,\n          currentStoreId: storeId,\n        });\n        if (this.state.fabricFilters.length > 0)\n          this.filterByFabricTypes(this.state.fabricFilters);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  filterByFabricTypes = (fabricList) => {\n    let projectsArr = [];\n\n    if (!this.state.store_selected) projectsArr = this.state.allProjects;\n    else projectsArr = this.state.projects;\n    let filteredProjects = [];\n    this.setState({ fabricFilters: fabricList });\n    fabricList.forEach((fabricType) => {\n      projectsArr.map((project) =>\n        project.materials.map((material) =>\n          material.fabric_type === fabricType &&\n          !filteredProjects.some((elm) => elm._id === project._id)\n            ? filteredProjects.push(project)\n            : null\n        )\n      );\n    });\n    this.setState({ projects: filteredProjects }); // HEHEHE\n  };\n\n  filterByFabricTypesWhenMarkerClicked = (fabricList) => {\n    this.filterByFabricTypes(fabricList);\n    if (this.state.projects.length <= 1 && this.state.store_selected)\n      this.handleMarkerClick(this.state.currentStoreId);\n  };\n\n  displayProjectList = () => {\n    // conditional logic for rendering project list\n    const location = this.props.history.location.pathname.toString();\n    return location.startsWith(\"/profile\") ? (\n      // render contrib list with this.state.userContrib\n      <ContributionsList projects={this.state.userContributions} />\n    ) : (\n      <ProjectList\n        projects={this.state.projects}\n        currentProject={this.getSelectedProject}\n      />\n    );\n  };\n\n  getInputCoordinates = (coordinates) => {\n    this.setState({\n      inputCoordinates: coordinates,\n    });\n  };\n\n  // project contribution form handler\n  handleContributionSubmit = (data) => {\n    let id;\n    this.state.selectedProject.length === 0\n      ? (id = this.props.match.params.id)\n      : (id = this.state.selectedProject._id);\n    // Update project\n    apiHandler\n      .updateOne(`/api/projects/${id}/contributions`, data)\n      .then((apiRes) => {\n        this.setState({ selectedProject: apiRes.data });\n      })\n      .catch((err) => console.log());\n    apiHandler\n      .updateOne(`/api/users/paillettes`, data)\n      .then((apiRes) => {\n        this.props.context.setUser(apiRes.data);\n      })\n      .catch((err) => console.log());\n  };\n\n  render() {\n    const boxShadow = {\n      boxShadow: `25px 47px 100px -49px rgba(0, 0, 0, 0.4)`,\n    };\n    return (\n      <div className=\"dashboard-container\">\n        <div\n          className=\"left-block\"\n          style={\n            this.props.history.location.pathname === \"/\" ? boxShadow : null\n          }\n        >\n          <Switch>\n            <Route\n              exact\n              path=\"/\"\n              render={(props) => (\n                <Searchbar\n                  {...props}\n                  filterByFabricType={this.filterByFabricTypesWhenMarkerClicked}\n                  displayAllProjects={this.resetState}\n                  isStoreSelected={this.state.store_selected}\n                  sendCoordinates={this.getInputCoordinates}\n                  projectsNumber={this.state.projects.length}\n                  handleResetClick={this.resetState}\n                />\n              )}\n            />\n            <Route\n              path=\"/project/:id\"\n              render={(props) => (\n                <Searchbar\n                  {...props}\n                  filterByFabricType={this.filterByFabricTypesWhenMarkerClicked}\n                  displayAllProjects={this.resetState}\n                  isStoreSelected={this.state.store_selected}\n                  projectsNumber={this.state.projects.length}\n                  handleResetClick={this.resetState}\n                />\n              )}\n            />\n            <Route path=\"/profile\" component={ListTitle} />\n          </Switch>\n          {this.displayProjectList()}\n        </div>\n\n        <div className=\"right-block\">\n          <Switch>\n            <Route\n              exact\n              path=\"/\"\n              render={(props) => (\n                <HomeMap\n                  {...props}\n                  handleMarkClic={this.handleMarkerClick}\n                  searchInput={this.state.inputCoordinates}\n                />\n              )}\n            />\n            <Route\n              path=\"/project/:id\"\n              render={(props) => (\n                <ProjectContainer\n                  {...props}\n                  project={this.state.selectedProject}\n                  handleContributionFormSubmit={this.handleContributionSubmit}\n                  store={this.state.selectedProjectStoreInfo}\n                />\n              )}\n            />\n            <Route\n              path=\"/profile\"\n              render={(props) => <ProfileContainer {...props} />}\n            />\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withUser(Dashboard);\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport { withUser } from \"../components/Auth/withUser\";\n\nconst ProtectedRoute = ({ component: Component, context, ...rest }) => {\n  if (context.isLoading) {\n    return null;\n  } else if (context.isLoggedIn) {\n    return <Route {...rest} render={(props) => <Component {...props} />} />;\n  } else {\n    return <Redirect to=\"/signin\" />;\n  }\n};\n\nexport default withUser(ProtectedRoute);\n","import React, { Component } from \"react\";\nimport apiHandler from \"../../api/apiHandler\";\nimport { Link } from \"react-router-dom\";\n\nclass FormProject extends Component {\n  state = {\n    availableStores: [],\n    availableFabric: [\"cotton\", \"linen\", \"silk\", \"wool\", \"artificial fibers\"],\n  };\n  componentDidMount = () => {\n    this.getAllStores();\n  };\n\n  getAllStores = () => {\n    apiHandler\n      .getAll(\"/api/stores\")\n      .then((apiRes) => this.setState({ availableStores: apiRes.data }))\n      .catch((err) => console.log(err));\n  };\n\n  handleChangeObj = (evt, elm) => {\n    this.props.handleChangeMaterials({\n      fabric_type: evt.target.name,\n      required_quantity: evt.target.value,\n    });\n  };\n\n  handleSubmit = (evt) => {\n    this.props.handleFormSubmit();\n  };\n\n  render() {\n    // console.log();\n    return (\n      <div className=\"form-project-container\">\n        <h1 className=\"bold title is-3\">New project</h1>\n        <form\n          className=\"project-form field \"\n          onSubmit={this.props.handleFormSubmit}\n        >\n          <div className=\"top-project-form\">\n            {/* NAME OF THE PROJECT */}\n            <div className=\"input-name\">\n              <label className=\"label\">Name *</label>\n              <p className=\"control\">\n                <input\n                  className=\"input\"\n                  name=\"name\"\n                  type=\"string\"\n                  placeholder=\"Name \"\n                  onChange={this.props.handleChange}\n                  required\n                />\n              </p>\n            </div>\n            {/* SELECT STORE */}\n            <div className=\"select-store\">\n              <label className=\"label\">Store * </label>\n              <div className=\"field has-addons\">\n                <div className=\"control\">\n                  <div className=\"select\">\n                    <select\n                      name=\"store\"\n                      onChange={this.props.handleChange}\n                      required\n                    >\n                      {this.state.availableStores &&\n                        this.state.availableStores.map((str) => {\n                          return (\n                            <option key={str.name} value={str._id}>\n                              {str.name}\n                            </option>\n                          );\n                        })}\n                    </select>\n                  </div>\n                </div>\n              </div>\n            </div>\n            {/* DEADLINE */}\n            <div className=\"input-deadline\">\n              <label className=\"label\">Deadline *</label>\n              <p className=\"control\">\n                <input\n                  className=\"input\"\n                  name=\"deadline\"\n                  type=\"date\"\n                  onChange={this.props.handleChange}\n                  required\n                />\n              </p>\n            </div>\n          </div>\n\n          {/* DESCRIPTION */}\n          <div>\n            <label className=\"label\">Description *</label>\n            <p className=\"control\">\n              <textarea\n                className=\"textarea\"\n                name=\"description\"\n                type=\"text\"\n                placeholder=\"Describe your project in a few words...\"\n                onChange={this.props.handleChange}\n                required\n              />\n            </p>\n          </div>\n\n          {/* MATERIALS NEEDED */}\n          <div className=\"materials-block\">\n            <label className=\"label\">Materials needed * </label>\n            <div className=\"materials-container\">\n              {this.state.availableFabric &&\n                this.state.availableFabric.map((elm) => {\n                  return (\n                    <div className=\"field material-item\" key={elm} name={elm}>\n                      <label className=\"label is-small has-text-grey\">\n                        {elm}\n                      </label>\n                      <input\n                        className=\"input\"\n                        name={elm}\n                        type=\"number\"\n                        placeholder=\"1\"\n                        min={0}\n                        onChange={this.handleChangeObj}\n                      />\n                    </div>\n                  );\n                })}\n            </div>\n          </div>\n\n          {/* PROJECT IMAGE */}\n\n          <div className=\"input-image\">\n            <label className=\"label\">Image</label>\n            <div class=\"file has-name\">\n              <label class=\"file-label\">\n                <input\n                  className=\"file-input\"\n                  type=\"file\"\n                  name=\"image\"\n                  onChange={this.props.handleChange}\n                />\n                <span class=\"file-cta\">\n                  <span class=\"file-icon\">\n                    <i class=\"fas fa-upload\"></i>\n                  </span>\n                  <span class=\"file-label\">Choose a file…</span>\n                </span>\n                {this.props.projectImage && (\n                  <span class=\"file-name\">{this.props.projectImage}</span>\n                )}\n              </label>\n            </div>\n          </div>\n\n          <div className=\"field is-grouped is-grouped-right\">\n            <div className=\"control\">\n              <Link to=\"/\">\n                <div className=\"button is-light\">Cancel</div>\n              </Link>\n            </div>\n            <div className=\"control\">\n              <button className=\"button is-primary\">Create</button>\n            </div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\nexport default FormProject;\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport FormProject from \"../components/Forms/FormProject\";\nimport { withUser } from \"../components/Auth/withUser\";\nimport apiHandler from \"../api/apiHandler\";\n\nconst materialsList = [];\n\nclass CreateProject extends Component {\n  state = {\n    creator: \"\",\n    image: \"/path/your-image\",\n    name: \"\",\n    description: \"\",\n    deadline: \"\",\n    contributors: [],\n    materials: [],\n    store: \"\",\n  };\n\n  componentDidMount = () => {\n    if (this.props.context.user)\n      this.setState({ creator: this.props.context.user._id });\n    apiHandler\n      .getAll(\"/api/stores\")\n      .then((apiRes) => this.setState({ store: apiRes.data[0]._id }))\n      .catch((err) => console.log(err));\n  };\n\n  handleChange = (evt) => {\n    this.setState({ [evt.target.name]: evt.target.value });\n  };\n\n  handleChangeMaterials = (newVal) => {\n    if (\n      materialsList.length === 0 ||\n      !materialsList.some((elm) => elm.fabric_type === newVal.fabric_type)\n    )\n      materialsList.push(newVal);\n    else {\n      for (let i = 0; i < materialsList.length; i++) {\n        if (materialsList[i].fabric_type === newVal.fabric_type) {\n          materialsList.splice(i, 1);\n          materialsList.push(newVal);\n        }\n      }\n    }\n    this.setState({ materials: materialsList });\n  };\n\n  handleSubmit = (evt) => {\n    evt.preventDefault();\n    apiHandler\n      .createOne(\"/api/projects\", this.state)\n      .then((apiRes) => console.log(apiRes))\n      .catch((err) => console.log(err));\n    this.props.history.push(\"/\");\n  };\n\n  render() {\n    // console.log(this.state);\n    return (\n        <FormProject\n          handleChange={this.handleChange}\n          handleChangeMaterials={this.handleChangeMaterials}\n          handleFormSubmit={this.handleSubmit}\n          projectImage={this.state.image}\n        />\n    );\n  }\n}\n\nexport default withRouter(withUser(CreateProject));\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport NavMain from \"./components/NavMain\";\nimport Home from \"./pages/Home\";\nimport Dashboard from \"./pages/Dashboard\";\nimport ProtectedRoute from \"./components/ProtectedRoute\";\nimport CreateProject from \"./pages/CreateProject\";\nimport \"./styles/Dashboard.scss\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <NavMain />\n      <Switch>\n        <Route exact path=\"/home\" component={Home} />\n        <Route exact path=\"/signin\" component={Home} />\n        <Route exact path=\"/signup\" component={Home} />\n        <ProtectedRoute exact path=\"/create/project\" component={CreateProject} />\n        <ProtectedRoute exact path=\"/\" component={Dashboard} />\n        <ProtectedRoute exact path=\"/project/:id\" component={Dashboard} />\n        <ProtectedRoute exact path=\"/profile\" component={Dashboard} />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport UserProvider from \"./components/Auth/UserProvider\";\nimport App from \"./App\";\n\nimport \"./styles/reset.scss\";\nimport \"./styles/global.scss\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <UserProvider>\n      <App />\n    </UserProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}